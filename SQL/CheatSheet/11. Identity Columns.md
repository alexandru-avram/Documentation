# Identity Columns

- [IDENTITY](#identity)
- [SEQUENCE](#sequence)
  - [CREATE SEQUENCE](#create-sequqnce)
  - [GENERATING VALUES](#generating-values)
  - [CURRENT VALUE](#current-value)
  - [SET VALUE](#set-value)
  - [ALTER SEQUENCE](#alter-sequence)
  - [RESTARTING A SEQUENCE](#restarting-a-sequence)
  - [DESCENDING SEQUENCE](#descending-sequence)
  - [CYCLE](#cycle)
  - [INSERTING A SEQUENCE](#inserting-a-sequence)

<BR>

## IDENTITY
An identity column is a column in a table that acts as an unique value for each row inserted. It is often used as a primary key. They are usually auto-generated.

```
CREATE TABLE table1 (
  ID INT IDENTIFY (1,1) PRIMARY KEY,
  column1 NVARCHAR(100),
  column2 NVARVARR(100)
);

```

<BR>

## SEQUENCE
`SEQUENCE` is a database object that is used to generate a sequence of unique numeric values, typically used for auto-incrementing primary keys or other unique identifiers in a table. Sequences are useful for generating unique identifiers independently of any table, making them more flexible than auto-increment columns.

### CREATE SEQUENCE

You can create a sequence using the `CREATE SEQUENCE` statement. When creating a sequence, you can specify various options such as the starting value, increment value, minimum value, maximum value, and whether the sequence should cycle when it reaches its maximum or minimum value.

```
CREATE SEQUENCE IF NOT EXISTS sequence_name as INT
START WITH start_value
INCREMENT BY increment_value
MINVALUE min_value
MAXVALUE max_value;
```

### GENERATING VALUES
Once a sequence is created, you can generate the next value in the sequence using the `NEXTVAL` function.

```
SELECT NEXTVAL('sequence_name');
```

### CURRENT VALUE
The current value of the sequence can be obtained using the `CURRVAL` function, but `CURRVAL` can only be used after `NEXTVAL` has been called at least once in the session.

```
SELECT CURRVAL('sequence_name');
```

### SET VALUE
You can also set the current value of the sequence using `SETVAL`.

```
SELECT SETVAL('sequence_name', 100);
```

In order to set a new value, without skipping, add a `false` at the end.


```
SELECT SETVAL('sequence_name', 100, false);
```

### ALTER SEQUENCE
You can modify an existing sequence using `ALTER SEQUENCE`.

```
ALTER SEQUENCE sequence_name INCREMENT BY 5;
```


### RESTARTING A SEQUENCE
To restart a sequence, use `ALTER` in combination with `RESTART`

```
ALTER SEQUENCE sequence_name RESTART WITH 100;
```

### DESCENDING SEQUENCE
By incrementing the sequence with -1, you can also create descending sequences.

```
CREATE SEQUENCE IF NOT EXISTS sequence_name as INT
START WITH 100
INCREMENT BY -1
```

### CYCLE
When creating a sequence, you can also use `CYCLE` in order to cycle the sequence when it's needed. The default is `NO CYCLE`.

```
CREATE SEQUENCE IF NOT EXISTS sequence_name as INT
START WITH start_value
INCREMENT BY increment_value
MINVALUE min_value
MAXVALUE max_value
CYCLE;
```

### INSERTING A SEQUENCE
Sequences are most useful when used to inster into a table.

```
CREATE TABLE table_name (
    id SERIAL PRIMARY KEY,
    column1 VARCHAR2(50) NOT NULL,
    column2 VARCHAR2(100) NOT NULL
);


INSERT INTO table (id, column1, column2)
VALUES (user_id_seq.NEXTVAL, 'value_column1', 'vaolue_column2');
```
