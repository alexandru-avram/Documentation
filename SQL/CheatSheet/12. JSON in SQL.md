# JSON in SQL

 MySQL, PostgreSQL, MariaDB, Google BigQuery natively support JSON data types.
 <p>SQLite and Oracle SQL use TEXT or BLOB for JSON data, though JSON functions are available.</p>


<BR>


- [CREATING A JSON COLUMN](#creating-a-json-column)
- [INSERTING DATA](#inserting-data)
- [QUERING DATA](#quering-data)
- [UPDATING](#updating)
- [JONIS](#joins)


<BR>

## Creating A JSON Column

```
CREATE TABLE my_table (
    id INT PRIMARY KEY,
    data_column JSON
);
```

## Inserting Data
```
INSERT INTO my_table (id, data_column)
VALUES (1, '{"name": "John", "age": 30, "city": "New York"}');
```

## Quering Data

#### MySQL, MariaDB

```
SELECT JSON_EXTRACT(data_column, '$.name') AS name
FROM my_table
WHERE JSON_EXTRACT(data_column, '$.age') = 30;
```

#### PostgreSQL

```
SELECT data_column->>'name' AS name
FROM my_table
WHERE data_column->>'age' = '30';
```

#### SQLite

```
SELECT json_extract(data_column, '$.name') AS name
FROM my_table
WHERE json_extract(data_column, '$.age') = 30;
```

#### Oracle SQL

```
SELECT json_value(data_column, '$.name') AS name
FROM my_table
WHERE json_value(data_column, '$.age') = 30;
```

#### MS SQL Server

```
SELECT JSON_VALUE(data_column, '$.name') AS name
FROM my_table
WHERE JSON_VALUE(data_column, '$.age') = '30';
```

#### Google BigQuery

```
SELECT JSON_VALUE(data_column, '$.name') AS name
FROM my_table
WHERE JSON_VALUE(data_column, '$.age') = '30';
```

## Updating

#### MySQL, MariaDB

```
UPDATE my_table
SET data_column = JSON_SET(data_column, '$.city', 'San Francisco')
WHERE id = 1;
```

#### PostgreSQL

```
UPDATE my_table
SET data_column = json_set(data_column, '{city}', ' "San Francisco" ')
WHERE id = 1;
```

#### SQLite

```
UPDATE my_table
SET data_column = json_set(data_column, '$.city', 'San Francisco')
WHERE id = 1;
```

#### Oracle SQL

```
UPDATE my_table
SET data_column = json_mergepatch(data_column, '{"city":"San Francisco"}')
WHERE id = 1;
```

#### MS SQL Server

```
UPDATE my_table
SET data_column = JSON_MODIFY(data_column, '$.city', 'San Francisco')
WHERE id = 1;
```

#### Google BigQuery

```
UPDATE my_table
SET data_column = JSON_SET(data_column, '$.city', 'San Francisco')
WHERE id = 1;
```

## JOINS

#### MySQL, MariaDB

```
SELECT a.id, b.name
FROM table1 a
JOIN table2 b ON JSON_UNQUOTE( JSON_EXTRACT(a.data_column, '$.id')) = b.id;
```

#### PostgreSQL

```
SELECT a.id, b.name
FROM table1 a
JOIN table2 b ON JSON_VALUE(a.data_column->>'id')::int = b.id;
```

#### MS SQL Server

```
SELECT a.id, b.name
FROM table1 a
JOIN table2 b ON JSON_VALUE(a.data_column, '$.id') = b.id;
