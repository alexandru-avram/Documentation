# DATE & TIME (and DATETIME)

- [CORE TYPES & NOW](#Core-types-&-“now”)
  - [DATE literal](#DATE-literal)
  - [TIMESTAMP literal](#TIMESTAMP-literal)
  - [CURRENT_DATE](#current_date)
  - [CURRENT_TIMESTAMP](#current_timestamp)
  - [NOW (PG)](#now-pg)
  - [SYSDATE (Oracle)](#sysdate-oracle)
  - [SYSTIMESTAMP (Oracle)](#systimestamp-oracle)
  - [GETDATE() / SYSDATETIME() (T-SQL)](##getdate--sysdatetime-t-sql)
- [PARSING TEXT TO DATE/TIME](#parsing-text-to-datetimestamp)
  - [TO_DATE](#to_date)
  - [TO_TIMESTAMP](#to_timestamp)
  - [TRY_CONVERT (T-SQL)](#try_convert-t-sql)
- [EXTRACTING DATE PARTS](#extracting-parts-yearmonthday-names)
  - [EXTRACT](#extract)
  - [TO_CHAR for names](#to_char-for-names)
  - [YEAR / MONTH / DAY (T-SQL)](#year--month--day-t-sql)
  - [DATENAME (T-SQL)](#datename-t-sql)
 - [TRUNCATE](#truncate)
  - [DATE_TRUNC (PG)](#date_trunc-pg)
  - [MAKE_DATE (PG](#make_date-pg)
  - [MAKE_TIMESTAMP (PG)](#make_timestamp-pg)
  - [TRUNC (Oracle)](#trunct-oracle)
  - [DATEFROMPARTS](#datefromparts)
- [DATE/TIME ARITHMETIC](#datetime-arithmetic)
  - [INTERVALS (PG)](#intervals-pg)
  - [ADD_MONTHS (Oracle](#ADD_MONTHS-oracle)
  - [NUMTODSINTERVAL (Oracle)](#NUMTODSINTERVAL-Oracle)
  - [DATEADD (T-SQL)](dateadd-t-sql)
- [DIFFERENCES BETWEEN DATES](#DIFFERENCES-BETWEEN-DATES)
  - [AGE (PG)](#age-pg)
  - [MONTHS_BETWEEN (Oracle)](#months_between-oracle)
  - [DATEDIFF (T-SQL)](#datediff-t-sql)
- [First / Last day of month](#first--last-day-of-month)
  - [First day of month](#first-day-of-month)
  - [Last day of month](#last-day-of-month)
- [Range Predicates](#range-predicates) -> Specific date, month, year


---

## Core types & “now”

### DATE literal
Represents a calendar date.

```
SELECT DATE '2025-08-29' AS example_date;                         -- (PG)
SELECT DATE '2025-08-29' AS example_date FROM dual;               -- (Oracle)
SELECT CAST('2025-08-29' AS date) AS example_date;                -- (T-SQL)
```

### TIMESTAMP literal
Represents date + time (no time zone by default).

```
SELECT TIMESTAMP '2025-08-29 14:30:00' AS example_ts;             -- (PG)
SELECT TIMESTAMP '2025-08-29 14:30:00' AS example_ts FROM dual;   -- (Oracle)
SELECT CAST('2025-08-29 14:30:00' AS datetime2) AS example_ts;    -- (T-SQL)
```

### CURRENT_DATE
Current date.

```
SELECT CURRENT_DATE AS today;                                     -- (PG)
SELECT CURRENT_DATE AS today FROM dual;                            -- (Oracle, in session time zone)
SELECT CAST(GETDATE() AS date) AS today;                           -- (T-SQL)
```

### CURRENT_TIMESTAMP
Current timestamp (with time zone semantics in PG, with session tz in Oracle).

```
SELECT CURRENT_TIMESTAMP AS now_ts;                                -- (PG)
SELECT CURRENT_TIMESTAMP AS now_ts FROM dual;                      -- (Oracle)
SELECT SYSDATETIME() AS now_ts;                                    -- (T-SQL)
```

### NOW() (PG)
Alias for current timestamp.

```
SELECT NOW() AS now_ts;                                            -- (PG)
```

### SYSDATE (Oracle)
Current date+time (type `DATE`, seconds precision).

```
SELECT SYSDATE AS now_dt FROM dual;                                -- (Oracle)
```

### SYSTIMESTAMP (Oracle)
Current timestamp with time zone.

```
SELECT SYSTIMESTAMP AS now_ts FROM dual;                           -- (Oracle)
```

### GETDATE() / SYSDATETIME() (T-SQL)
Current date+time.

```
SELECT GETDATE() AS now_dt;                                        -- (T-SQL, datetime)
SELECT SYSDATETIME() AS now_dt2;                                   -- (T-SQL, datetime2)
```

---


## PARSING TEXT TO DATE/TIME

### TO_DATE
Parse text into a DATE using a format model.

```
SELECT TO_DATE('2025-08-29', 'YYYY-MM-DD') AS d;                   -- (PG)
SELECT TO_DATE('2025-08-29', 'YYYY-MM-DD') AS d FROM dual;         -- (Oracle)
```

### TO_TIMESTAMP
Parse text into a TIMESTAMP using a format model.

```
SELECT TO_TIMESTAMP('2025-08-29 14:30:00', 'YYYY-MM-DD HH24:MI:SS') AS ts;  -- (PG)
SELECT TO_TIMESTAMP('2025-08-29 14:30:00', 'YYYY-MM-DD HH24:MI:SS') AS ts FROM dual; -- (Oracle)
```

### TRY_CONVERT (T-SQL)
T-SQL alternatives for parsing.

```
SELECT TRY_CONVERT(date,      '2025-08-29', 23)  AS d;             -- (T-SQL)
SELECT TRY_CONVERT(datetime2, '2025-08-29 14:30:00', 120) AS ts;   -- (T-SQL)
```

---

## EXTRACTING PARTS

### EXTRACT
Pull components from date/time values.

```sql
SELECT EXTRACT(YEAR  FROM NOW())    AS year,                       -- (PG)
       EXTRACT(MONTH FROM NOW())    AS month,                      -- (PG)
       EXTRACT(DAY   FROM NOW())    AS day;                        -- (PG)

SELECT EXTRACT(YEAR  FROM SYSDATE)  AS year,                       -- (Oracle)
       EXTRACT(MONTH FROM SYSDATE)  AS month,
       EXTRACT(DAY   FROM SYSDATE)  AS day
FROM dual;                                                           -- (Oracle)
```

### TO_CHAR for names
Format day/month names.

```
SELECT TO_CHAR(NOW(),    'FMDay')  AS day_name,  TO_CHAR(NOW(), 'FMMonth') AS month_name;  -- (PG)
SELECT TO_CHAR(SYSDATE,  'FMDay')  AS day_name,  TO_CHAR(SYSDATE,'FMMonth') AS month_name FROM dual; -- (Oracle)
```

### YEAR / MONTH / DAY (T-SQL)
Component functions in SQL Server.

```
SELECT YEAR(GETDATE()) AS year, MONTH(GETDATE()) AS month, DAY(GETDATE()) AS day;  -- (T-SQL)
```

### DATENAME (T-SQL)
Name of the part (weekday, month, etc.).

```
SELECT DATENAME(WEEKDAY, GETDATE()) AS weekday_name, DATENAME(MONTH, GETDATE()) AS month_name;  -- (T-SQL)
```

---

## TRUNCATE

### DATE_TRUNC (PG)
Truncate timestamp to the start of a unit.

```
SELECT DATE_TRUNC('day',   NOW()) AS day_start,                    -- 00:00:00 (PG)
       DATE_TRUNC('week',  NOW()) AS week_start,                   -- ISO week start
       DATE_TRUNC('month', NOW()) AS month_start;                  -- first day of month
```

### TRUNC (Oracle)
Truncate date to the start of a unit.

```
SELECT TRUNC(SYSDATE, 'DD') AS day_start,                          -- (Oracle)
       TRUNC(SYSDATE, 'IW') AS week_start,                         -- ISO week (Mon)
       TRUNC(SYSDATE, 'MM') AS month_start
FROM dual;
```

### MAKE_DATE (PG)
Construct date from components.

```
SELECT MAKE_DATE(2025, 8, 29)                     AS d,            -- (PG)
```

### MAKE_TIMESTAMP (PG)
Construct datetime from components.

```
SELECT MAKE_TIMESTAMP(2025, 8, 29, 14, 30, 0)     AS ts;           -- (PG)
```

### DATEFROMPARTS (T-SQL)
Creates a date from individual parts.

```
SELECT DATEFROMPARTS(YEAR(GETDATE()), MONTH(GETDATE()), 1) AS month_start;  -- (T-SQL)
```

---

## DATE/TIME ARITHMETIC

### INTERVALS (PG)
Add intervals to dates/timestamps.

```
SELECT NOW() + INTERVAL '7 days'       AS plus_7d,                  -- (PG)
       CURRENT_DATE + 7                AS plus_7d_date,             -- days as int
       NOW() + MAKE_INTERVAL(months => 1) AS plus_1m;               -- (PG)
```

### ADD_MONTHS (Oracle)
Add months or precise units.

```
SELECT ADD_MONTHS(SYSDATE, 1) AS plus_1m,             -- (Oracle)
FROM dual;
```

### NUMTODSINTERVAL (Oracle)
Add precise units.

```
SELECT
      SYSDATE + NUMTODSINTERVAL(90,'MINUTE') AS plus_90m
FROM dual;
```


### DATEADD (T-SQL)
Add units in SQL Server.

```
SELECT DATEADD(DAY, 7, GETDATE())   AS plus_7d,                     -- (T-SQL)
       DATEADD(MONTH, 1, GETDATE()) AS plus_1m,
       DATEADD(MINUTE,90,GETDATE()) AS plus_90m;
```

---

## DIFFERENCES BETWEEN DATES

### AGE (PG)
Interval between two timestamps.

```
SELECT AGE(TIMESTAMP '2025-08-29', TIMESTAMP '2025-07-01') AS age_interval;  -- (PG)
```

### MONTHS_BETWEEN (Oracle)
Subtracting DATEs yields days; `MONTHS_BETWEEN` for months.

```
SELECT (SYSDATE - (SYSDATE - 3)) * 24 * 60 * 60 AS seconds_between, -- (Oracle)
       MONTHS_BETWEEN(DATE '2025-08-29', DATE '2025-07-01') AS months
FROM dual;
```

### DATEDIFF (T-SQL)
Difference in specified unit.

```
SELECT DATEDIFF(DAY,  '2025-07-01', '2025-08-29') AS days_diff,     -- (T-SQL)
       DATEDIFF(SECOND, DATEADD(HOUR,-3,GETDATE()), GETDATE()) AS seconds_diff;
```

---

## First / Last day of month

### First day of month
Compute the first day for any date `d`.

```
SELECT DATE_TRUNC('month', d)::date AS first_day                   -- (PG)
FROM (VALUES (DATE '2025-08-29')) AS t(d);

SELECT TRUNC(d, 'MM') AS first_day                                 -- (Oracle)
FROM (SELECT DATE '2025-08-29' d FROM dual);

DECLARE @d date = '2025-08-29';                                    -- (T-SQL)
SELECT DATEFROMPARTS(YEAR(@d), MONTH(@d), 1) AS first_day;         -- (T-SQL)
```

### Last day of month

```
SELECT (DATE_TRUNC('month', d) + INTERVAL '1 month - 1 day')::date AS last_day -- (PG)
FROM (VALUES (DATE '2025-08-29')) AS t(d);

SELECT LAST_DAY(d) AS last_day                                     -- (Oracle)
FROM (SELECT DATE '2025-08-29' d FROM dual);

DECLARE @d date = '2025-08-29';                                    -- (T-SQL)
SELECT EOMONTH(@d) AS last_day;                                    -- (T-SQL)
```

---

## Build from parts


### TO_DATE / TO_TIMESTAMP (Oracle)
Construct from strings with a format model.

```
SELECT TO_DATE('2025-08-29','YYYY-MM-DD') AS d,                     -- (Oracle)
       TO_TIMESTAMP('2025-08-29 14:30:00','YYYY-MM-DD HH24:MI:SS') AS ts
FROM dual;
```

### DATEFROMPARTS / DATETIME2FROMPARTS (T-SQL)
Construct from numeric parts.

```
SELECT DATEFROMPARTS(2025, 8, 29)                        AS d;      -- (T-SQL)
SELECT DATETIME2FROMPARTS(2025,8,29,14,30,0,0,7)         AS ts;     -- (T-SQL)
```

---

## Range Predicates
Prefer **range predicates** (`>=` … `<`) to keep index seeks.

### Is on a specific day (e.g., 2025‑08‑29)

```
WHERE ts >= TIMESTAMP '2025-08-29 00:00:00' AND ts < TIMESTAMP '2025-08-30 00:00:00'  -- (PG)

WHERE ts >= TIMESTAMP '2025-08-29 00:00:00' AND ts < TIMESTAMP '2025-08-30 00:00:00'  -- (Oracle)

WHERE ts >= '2025-08-29T00:00:00' AND ts < '2025-08-30T00:00:00'                      -- (T-SQL)
```

### Is in a specific month (e.g., Aug 2025)

```
WHERE ts >= DATE '2025-08-01'::timestamp AND ts < DATE '2025-09-01'::timestamp        -- (PG)

WHERE ts >= TIMESTAMP '2025-08-01 00:00:00'
  AND ts <  ADD_MONTHS(TIMESTAMP '2025-08-01 00:00:00', 1)                            -- (Oracle)

WHERE ts >= '2025-08-01T00:00:00' AND ts < '2025-09-01T00:00:00'                      -- (T-SQL)
```

### Is in a specific year (e.g., 2025)

```
WHERE ts >= TIMESTAMP '2025-01-01 00:00:00' AND ts < TIMESTAMP '2026-01-01 00:00:00'  -- (PG)

WHERE ts >= TIMESTAMP '2025-01-01 00:00:00'
  AND ts <  ADD_MONTHS(TIMESTAMP '2025-01-01 00:00:00', 12)                           -- (Oracle)

WHERE ts >= '2025-01-01T00:00:00' AND ts < '2026-01-01T00:00:00'                      -- (T-SQL)
```

